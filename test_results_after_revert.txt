
> sidepanel-fallback@1.0.0 test
> jest

PASS test/modeStorage.test.js
  ModeStorage - localStorage
    ✓ can save browser mode (1 ms)
    ✓ can retrieve saved browser mode
    ✓ returns null for unset browsers (1 ms)
    ✓ throws error for invalid browser name (4 ms)
    ✓ throws error for invalid mode name
    ✓ can use valid mode values

PASS test/index.test.js
  SidepanelFallback
    init
      ✓ initializes successfully (1 ms)
      ✓ uses default (auto) when mode is unset during initialization
      ✓ can initialize with custom settings
    openPanel
      ✓ opens panel with configured mode
      ✓ selects mode based on browser in auto mode (1 ms)
      ✓ selects window mode for Firefox in auto mode
      ✓ returns error when openPanel is called before init
      ✓ returns error when openPanel is called without arguments
    withSettingsUI
      ✓ creates settings UI and inserts into container (1 ms)
      ✓ saves to storage when settings are changed
      ✓ returns error when withSettingsUI is called before init
      ✓ returns error when container is not specified
    getCurrentSettings
      ✓ can retrieve current settings
      ✓ returns null when called before init

PASS test/settingsUI.test.js
  SettingsUI
    renderSettingsPanel
      ✓ generates settings panel HTML (1 ms)
      ✓ generates UI reflecting current settings value (mode)
      ✓ uses default value (sidepanel) when unset
    bindEvents
      ✓ binds callback function for settings changes (1 ms)
      ✓ calls callback when radio button is changed
    createSettingsPanel
      ✓ creates complete settings panel (rendering + event binding) (2 ms)
      ✓ can create panel without callback function
    createRadioGroup
      ✓ creates radio button group
      ✓ sets checked state correctly (1 ms)

PASS test/panelLauncher.test.js
  PanelLauncher
    openPanel
      ✓ opens sidepanel when chrome.sidePanel.open is available in sidepanel mode (2 ms)
      ✓ uses window.open to open popup in window mode
      ✓ falls back to window when chrome.sidePanel is not available in sidepanel mode
      ✓ falls back to window when chrome.sidePanel.open throws error in sidepanel mode (1 ms)
      ✓ returns error when window.open fails
      ✓ returns error for invalid mode (other than sidepanel or window)
    isExtensionContext
      ✓ returns true when chrome.sidePanel API is available (1 ms)
      ✓ returns false when chrome object does not exist
      ✓ returns false when chrome object exists but sidePanel does not

PASS test/browserInfo.test.js
  getBrowserInfo
    ✓ correctly identifies Chrome user agent (1 ms)
    ✓ can detect Dia browser
    ✓ can detect Firefox
    ✓ can detect Safari
    ✓ can detect Edge
    ✓ returns unknown for unrecognized browsers
    ✓ returns unknown when undefined is passed
    ✓ returns unknown when empty string is passed

Test Suites: 5 passed, 5 total
Tests:       46 passed, 46 total
Snapshots:   0 total
Time:        0.351 s, estimated 1 s
Ran all test suites.
