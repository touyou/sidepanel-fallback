<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SidepanelFallback Test Page</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }
        
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 10px 10px 0;
            transition: background-color 0.2s;
        }
        
        .button:hover { background: #0056b3; }
        .button:disabled { background: #6c757d; cursor: not-allowed; }
        
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status.info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        
        .settings-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .code {
            background: #f1f3f4;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        .browser-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        
        .badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .badge.chrome { background: #4285f4; color: white; }
        .badge.firefox { background: #ff7139; color: white; }
        .badge.safari { background: #1b88ca; color: white; }
        .badge.edge { background: #0078d4; color: white; }
        .badge.unknown { background: #6c757d; color: white; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîÑ SidepanelFallback Test Page</h1>
        <p>Interactive testing interface for the Chrome Extension fallback library</p>
    </div>

    <div class="section">
        <h2>üìä Library Status</h2>
        <div id="library-status" class="status info">Library not initialized</div>
        <button id="init-btn" class="button">Initialize Library</button>
        <button id="reset-btn" class="button" disabled>Reset</button>
    </div>

    <div class="section">
        <h2>üåê Browser Detection</h2>
        <div class="browser-info">
            <div><strong>Detected Browser:</strong> <span id="browser-name" class="badge unknown">Unknown</span></div>
            <div><strong>Current Mode:</strong> <span id="current-mode">Not set</span></div>
        </div>
        <div class="code" id="user-agent"></div>
    </div>

    <div class="section">
        <h2>üöÄ Panel Testing</h2>
        <button id="open-panel-btn" class="button" disabled>Open Panel</button>
        <button id="open-panel-custom-btn" class="button" disabled>Open Custom Panel</button>
        <div id="panel-status" class="status info">Initialize library first</div>
    </div>

    <div class="section">
        <h2>‚öôÔ∏è Settings UI</h2>
        <button id="toggle-settings-btn" class="button" disabled>Toggle Settings UI</button>
        <div id="settings-container" class="settings-container" style="display: none;"></div>
    </div>

    <div class="section">
        <h2>üß™ Test Results</h2>
        <div id="test-log"></div>
        <button id="clear-log-btn" class="button">Clear Log</button>
    </div>

    <div class="section">
        <h2>üìö Usage Example</h2>
        <div class="code">import { SidepanelFallback } from 'sidepanel-fallback';

// Initialize
const fallback = new SidepanelFallback();
await fallback.init();

// Open panel
const result = await fallback.openPanel('/panel.html');

// Add settings UI
await fallback.withSettingsUI(container);</div>
    </div>

    <script type="module">
        // This is a simplified test page - in a real implementation,
        // you would import the actual library
        console.log('SidepanelFallback Test Page - Ready for testing');
        
        // For demonstration purposes, we'll show how the API would be used
        document.getElementById('user-agent').textContent = navigator.userAgent;
        
        // Mock the library for demonstration
        let mockInitialized = false;
        
        document.getElementById('init-btn').addEventListener('click', () => {
            mockInitialized = true;
            document.getElementById('library-status').textContent = 'Library initialized (demo)';
            document.getElementById('library-status').className = 'status success';
            document.getElementById('init-btn').disabled = true;
            document.getElementById('reset-btn').disabled = false;
            document.getElementById('open-panel-btn').disabled = false;
            document.getElementById('open-panel-custom-btn').disabled = false;
            document.getElementById('toggle-settings-btn').disabled = false;
        });
        
        document.getElementById('reset-btn').addEventListener('click', () => {
            mockInitialized = false;
            document.getElementById('library-status').textContent = 'Library not initialized';
            document.getElementById('library-status').className = 'status info';
            document.getElementById('init-btn').disabled = false;
            document.getElementById('reset-btn').disabled = true;
            document.getElementById('open-panel-btn').disabled = true;
            document.getElementById('open-panel-custom-btn').disabled = true;
            document.getElementById('toggle-settings-btn').disabled = true;
        });
        
        document.getElementById('clear-log-btn').addEventListener('click', () => {
            document.getElementById('test-log').innerHTML = '';
        });
        
        // Log function for demo
        function log(message, type = 'info') {
            const logEntry = document.createElement('div');
            logEntry.className = `status ${type}`;
            logEntry.innerHTML = `<strong>[${new Date().toLocaleTimeString()}]</strong> ${message}`;
            document.getElementById('test-log').appendChild(logEntry);
        }
        
        log('Test page loaded - This is a demo interface');
        log('To use with the real library, import from ../src/index.js');
    </script>
</body>
</html>
